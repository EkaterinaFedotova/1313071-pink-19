"use strict";function init(e){var t=new e.Map("map",{center:[59.93863106417265,30.3230545],zoom:16,controls:[]}),r=new e.Placemark([59.93867682348719,30.323043771163896],{},{iconLayout:"default#image",iconImageHref:"img/icon-map-marker.svg",iconImageSize:[35,35],iconImageOffset:[-17.5,-17.5]}),s=new e.control.ZoomControl({options:{position:{left:10,bottom:50}}});t.behaviors.disable("scrollZoom"),t.geoObjects.add(r),t.controls.add(s)}svg4everybody(),function(){var r,s,e=document.querySelector(".page-header"),t=document.getElementById("toggle-button"),n=window.pageYOffset;e&&(e.classList.add("page-header--js"),s=e.querySelector(".main-menu"),r=e.querySelector(".page-header__nav-wrapper"),s&&s.classList.add("main-menu--closed"),r&&(r.setAttribute("data-status","closed"),r.classList.add("page-header__nav-wrapper--js"),r.classList.add("page-header__nav-wrapper--transparent"),window.addEventListener("scroll",function(){n=window.pageYOffset,"closed"===r.dataset.status&&(70<n?r.classList.remove("page-header__nav-wrapper--transparent"):r.classList.add("page-header__nav-wrapper--transparent"))}))),t&&(t.classList.add("main-nav__toggle--js"),t.classList.add("main-nav__toggle--off"),t.addEventListener("click",function(e){var t=e.target;e.preventDefault(),t.classList.toggle("main-nav__toggle--off"),s&&s.classList.toggle("main-menu--closed");r&&("closed"===r.dataset.status?r.dataset.status="opened":r.dataset.status="closed",r.classList.contains("page-header__nav-wrapper--transparent")?r.classList.remove("page-header__nav-wrapper--transparent"):n<70&&r.classList.add("page-header__nav-wrapper--transparent"))}))}(),function(){var i,l,e=document.getElementById("photo-filters");if(e){var t=e.querySelector(".form-photo__filters-buttons");i=Array.from(t.querySelectorAll(".form-photo__filter-button")),l=Array.from(e.querySelectorAll(".form-photo__filter")),i&&l&&t.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("form-photo__filter-button")){e.preventDefault();var r=i.indexOf(i.find(c)),s=i.indexOf(t);i[r].classList.remove("form-photo__filter-button--current"),i[s].classList.add("form-photo__filter-button--current");var n=l.indexOf(l.find(d)),a=s;o=a,l[n].classList.remove("form-photo__filter--current"),l[o].classList.add("form-photo__filter--current")}var o})}function c(e){return e.classList.contains("form-photo__filter-button--current")}function d(e){return e.classList.contains("form-photo__filter--current")}}(),function(){var n,a,e=document.getElementById("price");if(e){var t=e.querySelector(".slider-controls");a=e.querySelector(".price__table"),(n=Array.from(t.querySelectorAll(".slider-controls__button")))&&t.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("slider-controls__button")){var r=n.indexOf(n.find(o)),s=n.indexOf(t);n[r].classList.remove("slider-controls__button--current"),n[s].classList.add("slider-controls__button--current"),a.style.left="".concat(150-100*s,"%")}})}function o(e){return e.classList.contains("slider-controls__button--current")}}(),function(){var o,a,i,e=document.getElementById("slider-reviews");if(e){var t=e.querySelector(".slider-controls"),r=e.querySelector(".slider-nav");o=Array.from(t.querySelectorAll(".slider-controls__button")),a=Array.from(r.querySelectorAll(".slider-nav__slider-button")),(i=Array.from(e.querySelectorAll(".slider-reviews__slide")))&&o&&(t.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("slider-controls__button")){e.preventDefault();var r=o.indexOf(o.find(l)),s=o.indexOf(t);o[r].classList.remove("slider-controls__button--current"),o[s].classList.add("slider-controls__button--current");var n=i.indexOf(i.find(c)),a=s;d(n,a)}}),r.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("slider-nav__slider-button")){e.preventDefault();var r=a.indexOf(t),s=i.indexOf(i.find(c)),n=s;switch(r){case 0:(n-=1)<0&&(n=i.length-1);break;case 1:(n+=1)>=i.length&&(n=0)}d(s,n)}}))}function l(e){return e.classList.contains("slider-controls__button--current")}function c(e){return e.classList.contains("slider-reviews__slide--current")}function d(e,t){i[e].classList.remove("slider-reviews__slide--current"),i[t].classList.add("slider-reviews__slide--current")}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiaW50ZXJhY3RpdmUtbWFwLmpzIiwibWFpbi1tZW51LmpzIiwicGhvdG8tZmlsdGVycy5qcyIsInByaWNlLXRhYmxlLmpzIiwicmV2aWV3cy1zbGlkZXIuanMiXSwibmFtZXMiOlsiaW5pdCIsInltYXBzIiwibWFwIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImNvbnRyb2xzIiwicGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiaWNvbkxheW91dCIsImljb25JbWFnZUhyZWYiLCJpY29uSW1hZ2VTaXplIiwiaWNvbkltYWdlT2Zmc2V0Iiwiem9vbUNvbnRyb2wiLCJjb250cm9sIiwiWm9vbUNvbnRyb2wiLCJvcHRpb25zIiwicG9zaXRpb24iLCJsZWZ0IiwiYm90dG9tIiwiYmVoYXZpb3JzIiwiZGlzYWJsZSIsImdlb09iamVjdHMiLCJhZGQiLCJzdmc0ZXZlcnlib2R5IiwibmF2V3JhcHBlciIsIm1haW5NZW51IiwicGFnZUhlYWRlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRvZ2dsZUJ1dHRvbiIsImdldEVsZW1lbnRCeUlkIiwiY29vcmRZIiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJjbGFzc0xpc3QiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZGF0YXNldCIsInN0YXR1cyIsInJlbW92ZSIsImV2dCIsImVsZW1lbnQiLCJ0YXJnZXQiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwiZmlsdGVyQnV0dG9ucyIsImZpbHRlcnMiLCJwaG90b0ZpbHRlcnMiLCJmaWx0ZXJzQnV0dG9ucyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbmRleEN1cnJlbnRCdXR0b24iLCJpbmRleE9mIiwiZmluZCIsImZpbmRDdXJyZW50QnV0dG9uIiwiaW5kZXhOZXh0QnV0dG9uIiwiaW5kZXhDdXJyZW50RmlsdGVyIiwiZmluZEN1cnJlbnRGaWx0ZXIiLCJpbmRleE5leHRGaWx0ZXIiLCJpbmRleE5leHRTbGlkZSIsInNsaWRlckJ1dHRvbnMiLCJwcmljZVRhYmxlIiwicHJpY2VCbG9jayIsInNsaWRlckNvbnRyb2xzIiwic3R5bGUiLCJjb25jYXQiLCJzbGlkZXJOYXZCdXR0b25zIiwic2xpZGVzIiwicmV2aWV3c1NsaWRlciIsInNsaWRlck5hdiIsImluZGV4Q3VycmVudFNsaWRlIiwiZmluZEN1cnJlbnRTbGlkZSIsImNoYW5nZVNsaWRlcyIsImluZGV4QnV0dG9uIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiQUFBQSxhQ0VBLFNBQVNBLEtBQUtDLEdBRVosSUFBSUMsRUFBTSxJQUFJRCxFQUFNRSxJQUFJLE1BQU8sQ0FDN0JDLE9BQVEsQ0FBQyxrQkFBbUIsWUFDNUJDLEtBQU0sR0FDTkMsU0FBVSxLQUdSQyxFQUFZLElBQUlOLEVBQU1PLFVBQ3hCLENBQUMsa0JBQW1CLG9CQUNwQixHQUNBLENBQ0VDLFdBQVksZ0JBQ1pDLGNBQWUsMEJBQ2ZDLGNBQWUsQ0FBQyxHQUFJLElBQ3BCQyxnQkFBaUIsRUFBRSxNQUFPLFFBSTFCQyxFQUFjLElBQUlaLEVBQU1hLFFBQVFDLFlBQVksQ0FDOUNDLFFBQVMsQ0FDUEMsU0FBVSxDQUNSQyxLQUFNLEdBQ05DLE9BQVEsT0FLZGpCLEVBQUlrQixVQUFVQyxRQUFRLGNBQ3RCbkIsRUFBSW9CLFdBQVdDLElBQUloQixHQUNuQkwsRUFBSUksU0FBU2lCLElBQUlWLEdEOUJuQlcsZ0JFQUEsV0FDRSxJQUdJQyxFQUFZQyxFQUhWQyxFQUFhQyxTQUFTQyxjQUFjLGdCQUNwQ0MsRUFBZUYsU0FBU0csZUFBZSxpQkFHekNDLEVBQVNDLE9BQU9DLFlBSWhCUCxJQUNGQSxFQUFXUSxVQUFVWixJQUFJLG1CQUV6QkcsRUFBV0MsRUFBV0UsY0FBYyxjQUNwQ0osRUFBYUUsRUFBV0UsY0FBYyw2QkFFbENILEdBQ0ZBLEVBQVNTLFVBQVVaLElBQUkscUJBR3JCRSxJQUNGQSxFQUFXVyxhQUFhLGNBQWUsVUFDdkNYLEVBQVdVLFVBQVVaLElBQUksZ0NBQ3pCRSxF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QixFQUFpQmhDLEdBQ3hCLE9BQU9BLEVBQVFQLFVBQVVXLFNBQVMsa0NBR3BDLFNBQVM2QixFQUFhRixFQUFtQlgsR0FDdkNRLEVBQU9HLEdBQW1CdEMsVUFBVUssT0FBTyxrQ0FDM0M4QixFQUFPUixHQUFnQjNCLFVBQVVaLElBQUksbUNBNUJ6QyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnN2ZzRldmVyeWJvZHkoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuIiwiLy8gLy8g0K/QvdC00LXQutGBINC60LDRgNGC0LBcbi8qZXNsaW50LWRpc2FibGUqL1xuZnVuY3Rpb24gaW5pdCh5bWFwcykge1xuLyplc2xpbnQtZW5hYmxlKi9cbiAgbGV0IG1hcCA9IG5ldyB5bWFwcy5NYXAoJ21hcCcsIHtcbiAgICBjZW50ZXI6IFs1OS45Mzg2MzEwNjQxNzI2NSwgMzAuMzIzMDU0NV0sXG4gICAgem9vbTogMTYsXG4gICAgY29udHJvbHM6IFtdXG4gIH0pO1xuXG4gIGxldCBwbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFxuICAgIFs1OS45Mzg2NzY4MjM0ODcxOSwgMzAuMzIzMDQzNzcxMTYzODk2XSxcbiAgICB7fSxcbiAgICB7XG4gICAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXG4gICAgICBpY29uSW1hZ2VIcmVmOiAnaW1nL2ljb24tbWFwLW1hcmtlci5zdmcnLFxuICAgICAgaWNvbkltYWdlU2l6ZTogWzM1LCAzNV0sXG4gICAgICBpY29uSW1hZ2VPZmZzZXQ6IFstMTcuNSwgLTE3LjVdXG4gICAgfVxuICApO1xuXG4gIGxldCB6b29tQ29udHJvbCA9IG5ldyB5bWFwcy5jb250cm9sLlpvb21Db250cm9sKHtcbiAgICBvcHRpb25zOiB7XG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICBsZWZ0OiAxMCxcbiAgICAgICAgYm90dG9tOiA1MFxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdzY3JvbGxab29tJyk7XG4gIG1hcC5nZW9PYmplY3RzLmFkZChwbGFjZW1hcmspO1xuICBtYXAuY29udHJvbHMuYWRkKHpvb21Db250cm9sKTtcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vINCc0LXQvdGOXG4oZnVuY3Rpb24gKCkge1xuICBjb25zdCBwYWdlSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UtaGVhZGVyJyk7XG4gIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2dnbGUtYnV0dG9uJyk7XG5cbiAgbGV0IG5hdldyYXBwZXIsIG1haW5NZW51O1xuICBsZXQgY29vcmRZID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuXG4gIGNvbnN0IFNDUk9MTF9ZX1ZBTFVFID0gNzA7XG5cbiAgaWYgKHBhZ2VIZWFkZXIpIHtcbiAgICBwYWdlSGVhZGVyLmNsYXNzTGlzdC5hZGQoJ3BhZ2UtaGVhZGVyLS1qcycpO1xuXG4gICAgbWFpbk1lbnUgPSBwYWdlSGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW1lbnUnKTtcbiAgICBuYXZXcmFwcGVyID0gcGFnZUhlYWRlci5xdWVyeVNlbGVjdG9yKCcucGFnZS1oZWFkZXJfX25hdi13cmFwcGVyJyk7XG5cbiAgICBpZiAobWFpbk1lbnUpIHtcbiAgICAgIG1haW5NZW51LmNsYXNzTGlzdC5hZGQoJ21haW4tbWVudS0tY2xvc2VkJyk7XG4gICAgfVxuXG4gICAgaWYgKG5hdldyYXBwZXIpIHtcbiAgICAgIG5hdldyYXBwZXIuc2V0QXR0cmlidXRlKCdkYXRhLXN0YXR1cycsICdjbG9zZWQnKTtcbiAgICAgIG5hdldyYXBwZXIuY2xhc3NMaXN0LmFkZCgncGFnZS1oZWFkZXJfX25hdi13cmFwcGVyLS1qcycpO1xuICAgICAgbmF2V3JhcHBlci5jbGFzc0xpc3QuYWRkKCdwYWdlLWhlYWRlcl9fbmF2LXdyYXBwZXItLXRyYW5zcGFyZW50Jyk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxXaW5kb3cpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0b2dnbGVCdXR0b24pIHtcbiAgICB0b2dnbGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbWFpbi1uYXZfX3RvZ2dsZS0tanMnKTtcbiAgICB0b2dnbGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbWFpbi1uYXZfX3RvZ2dsZS0tb2ZmJyk7XG4gICAgdG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tUb2dnbGVCdXR0b24pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xpY2tUb2dnbGVCdXR0b24oZXZ0KSB7XG4gICAgbGV0IGVsZW1lbnQgPSBldnQudGFyZ2V0O1xuXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdtYWluLW5hdl9fdG9nZ2xlLS1vZmYnKTtcblxuICAgIGlmIChtYWluTWVudSkge1xuICAgICAgbWFpbk1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnbWFpbi1tZW51LS1jbG9zZWQnKTtcbiAgICB9XG5cbiAgICBpZiAobmF2V3JhcHBlcikge1xuICAgICAgaWYgKG5hdldyYXBwZXIuZGF0YXNldC5zdGF0dXMgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIG5hdldyYXBwZXIuZGF0YXNldC5zdGF0dXMgPSAnb3BlbmVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hdldyYXBwZXIuZGF0YXNldC5zdGF0dXMgPSAnY2xvc2VkJztcbiAgICAgIH1cblxuICAgICAgaWYgKG5hdldyYXBwZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYWdlLWhlYWRlcl9fbmF2LXdyYXBwZXItLXRyYW5zcGFyZW50JykpIHtcbiAgICAgICAgbmF2V3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdwYWdlLWhlYWRlcl9fbmF2LXdyYXBwZXItLXRyYW5zcGFyZW50Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY29vcmRZIDwgU0NST0xMX1lfVkFMVUUpIHtcbiAgICAgICAgICBuYXZXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ3BhZ2UtaGVhZGVyX19uYXYtd3JhcHBlci0tdHJhbnNwYXJlbnQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNjcm9sbFdpbmRvdygpIHtcbiAgICBjb29yZFkgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG5cbiAgICBpZiAobmF2V3JhcHBlci5kYXRhc2V0LnN0YXR1cyA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgIGlmIChjb29yZFkgPiBTQ1JPTExfWV9WQUxVRSkge1xuICAgICAgICBuYXZXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2UtaGVhZGVyX19uYXYtd3JhcHBlci0tdHJhbnNwYXJlbnQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hdldyYXBwZXIuY2xhc3NMaXN0LmFkZCgncGFnZS1oZWFkZXJfX25hdi13cmFwcGVyLS10cmFuc3BhcmVudCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vINCR0LvQvtC6INGE0LjQu9GM0YLRgNC+0LIg0LTQu9GPINGE0L7RgtC+XG4oZnVuY3Rpb24gKCkge1xuICBjb25zdCBwaG90b0ZpbHRlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvdG8tZmlsdGVycycpO1xuICBsZXQgZmlsdGVyQnV0dG9ucywgZmlsdGVycztcblxuICBpZiAocGhvdG9GaWx0ZXJzKSB7XG4gICAgY29uc3QgZmlsdGVyc0J1dHRvbnMgPSBwaG90b0ZpbHRlcnMucXVlcnlTZWxlY3RvcignLmZvcm0tcGhvdG9fX2ZpbHRlcnMtYnV0dG9ucycpO1xuXG4gICAgZmlsdGVyQnV0dG9ucyA9IEFycmF5LmZyb20oZmlsdGVyc0J1dHRvbnMucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tcGhvdG9fX2ZpbHRlci1idXR0b24nKSk7XG4gICAgZmlsdGVycyA9IEFycmF5LmZyb20ocGhvdG9GaWx0ZXJzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLXBob3RvX19maWx0ZXInKSk7XG5cbiAgICBpZiAoZmlsdGVyQnV0dG9ucyAmJiBmaWx0ZXJzKSB7XG4gICAgICBmaWx0ZXJzQnV0dG9ucy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrRmlsdGVyc0J1dHRvbnMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRDdXJyZW50QnV0dG9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zvcm0tcGhvdG9fX2ZpbHRlci1idXR0b24tLWN1cnJlbnQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRDdXJyZW50RmlsdGVyKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zvcm0tcGhvdG9fX2ZpbHRlci0tY3VycmVudCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhbmdlRmlsdGVycyhpbmRleEN1cnJlbnRTbGlkZSwgaW5kZXhOZXh0U2xpZGUpIHtcbiAgICBmaWx0ZXJzW2luZGV4Q3VycmVudFNsaWRlXS5jbGFzc0xpc3QucmVtb3ZlKCdmb3JtLXBob3RvX19maWx0ZXItLWN1cnJlbnQnKTtcbiAgICBmaWx0ZXJzW2luZGV4TmV4dFNsaWRlXS5jbGFzc0xpc3QuYWRkKCdmb3JtLXBob3RvX19maWx0ZXItLWN1cnJlbnQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrRmlsdGVyc0J1dHRvbnMoZXZ0KSB7XG4gICAgbGV0IGVsZW1lbnQgPSBldnQudGFyZ2V0O1xuXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb3JtLXBob3RvX19maWx0ZXItYnV0dG9uJykpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBsZXQgaW5kZXhDdXJyZW50QnV0dG9uID0gZmlsdGVyQnV0dG9ucy5pbmRleE9mKGZpbHRlckJ1dHRvbnMuZmluZChmaW5kQ3VycmVudEJ1dHRvbikpO1xuICAgICAgbGV0IGluZGV4TmV4dEJ1dHRvbiA9IGZpbHRlckJ1dHRvbnMuaW5kZXhPZihlbGVtZW50KTtcblxuICAgICAgZmlsdGVyQnV0dG9uc1tpbmRleEN1cnJlbnRCdXR0b25dLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm0tcGhvdG9fX2ZpbHRlci1idXR0b24tLWN1cnJlbnQnKTtcbiAgICAgIGZpbHRlckJ1dHRvbnNbaW5kZXhOZXh0QnV0dG9uXS5jbGFzc0xpc3QuYWRkKCdmb3JtLXBob3RvX19maWx0ZXItYnV0dG9uLS1jdXJyZW50Jyk7XG5cbiAgICAgIGxldCBpbmRleEN1cnJlbnRGaWx0ZXIgPSBmaWx0ZXJzLmluZGV4T2YoZmlsdGVycy5maW5kKGZpbmRDdXJyZW50RmlsdGVyKSk7XG4gICAgICBsZXQgaW5kZXhOZXh0RmlsdGVyID0gaW5kZXhOZXh0QnV0dG9uO1xuXG4gICAgICBjaGFuZ2VGaWx0ZXJzKGluZGV4Q3VycmVudEZpbHRlciwgaW5kZXhOZXh0RmlsdGVyKTtcbiAgICB9XG4gIH1cbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG4vLyDQotCw0LHQu9C40YbQsCDRgtCw0YDQuNGE0L7QslxuKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgcHJpY2VCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmljZScpO1xuICBsZXQgc2xpZGVyQnV0dG9ucywgcHJpY2VUYWJsZTtcblxuICBpZiAocHJpY2VCbG9jaykge1xuICAgIGNvbnN0IHNsaWRlckNvbnRyb2xzID0gcHJpY2VCbG9jay5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWNvbnRyb2xzJyk7XG4gICAgcHJpY2VUYWJsZSA9IHByaWNlQmxvY2sucXVlcnlTZWxlY3RvcignLnByaWNlX190YWJsZScpO1xuXG4gICAgc2xpZGVyQnV0dG9ucyA9IEFycmF5LmZyb20oc2xpZGVyQ29udHJvbHMucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlci1jb250cm9sc19fYnV0dG9uJykpO1xuXG4gICAgaWYgKHNsaWRlckJ1dHRvbnMpIHtcbiAgICAgIHNsaWRlckNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tTbGlkZXJDb250cm9scyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmluZEN1cnJlbnRCdXR0b24oZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWNvbnRyb2xzX19idXR0b24tLWN1cnJlbnQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrU2xpZGVyQ29udHJvbHMoZXZ0KSB7XG4gICAgbGV0IGVsZW1lbnQgPSBldnQudGFyZ2V0O1xuXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXItY29udHJvbHNfX2J1dHRvbicpKSB7XG4gICAgICBsZXQgaW5kZXhDdXJyZW50QnV0dG9uID0gc2xpZGVyQnV0dG9ucy5pbmRleE9mKHNsaWRlckJ1dHRvbnMuZmluZChmaW5kQ3VycmVudEJ1dHRvbikpO1xuICAgICAgbGV0IGluZGV4TmV4dEJ1dHRvbiA9IHNsaWRlckJ1dHRvbnMuaW5kZXhPZihlbGVtZW50KTtcblxuICAgICAgc2xpZGVyQnV0dG9uc1tpbmRleEN1cnJlbnRCdXR0b25dLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlci1jb250cm9sc19fYnV0dG9uLS1jdXJyZW50Jyk7XG4gICAgICBzbGlkZXJCdXR0b25zW2luZGV4TmV4dEJ1dHRvbl0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyLWNvbnRyb2xzX19idXR0b24tLWN1cnJlbnQnKTtcbiAgICAgIHByaWNlVGFibGUuc3R5bGUubGVmdCA9IGAkeygxNTAgLSBpbmRleE5leHRCdXR0b24gKiAxMDApfSVgO1xuICAgIH1cbiAgfVxufSkoKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vINCR0LvQvtC6INC+0YLQt9GL0LLQvtCyXG4oZnVuY3Rpb24gKCkge1xuICBjb25zdCByZXZpZXdzU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NsaWRlci1yZXZpZXdzJyk7XG4gIGxldCBzbGlkZXJCdXR0b25zLCBzbGlkZXJOYXZCdXR0b25zLCBzbGlkZXM7XG5cbiAgaWYgKHJldmlld3NTbGlkZXIpIHtcbiAgICBjb25zdCBzbGlkZXJDb250cm9scyA9IHJldmlld3NTbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlci1jb250cm9scycpO1xuICAgIGNvbnN0IHNsaWRlck5hdiA9IHJldmlld3NTbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlci1uYXYnKTtcblxuICAgIHNsaWRlckJ1dHRvbnMgPSBBcnJheS5mcm9tKHNsaWRlckNvbnRyb2xzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItY29udHJvbHNfX2J1dHRvbicpKTtcbiAgICBzbGlkZXJOYXZCdXR0b25zID0gQXJyYXkuZnJvbShzbGlkZXJOYXYucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlci1uYXZfX3NsaWRlci1idXR0b24nKSk7XG4gICAgc2xpZGVzID0gQXJyYXkuZnJvbShyZXZpZXdzU2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItcmV2aWV3c19fc2xpZGUnKSk7XG5cbiAgICBpZiAoc2xpZGVzICYmIHNsaWRlckJ1dHRvbnMpIHtcbiAgICAgIHNsaWRlckNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tTbGlkZXJDb250cm9scyk7XG4gICAgICBzbGlkZXJOYXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja1NsaWRlck5hdik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmluZEN1cnJlbnRCdXR0b24oZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWNvbnRyb2xzX19idXR0b24tLWN1cnJlbnQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRDdXJyZW50U2xpZGUoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLXJldmlld3NfX3NsaWRlLS1jdXJyZW50Jyk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGFuZ2VTbGlkZXMoaW5kZXhDdXJyZW50U2xpZGUsIGluZGV4TmV4dFNsaWRlKSB7XG4gICAgc2xpZGVzW2luZGV4Q3VycmVudFNsaWRlXS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXItcmV2aWV3c19fc2xpZGUtLWN1cnJlbnQnKTtcbiAgICBzbGlkZXNbaW5kZXhOZXh0U2xpZGVdLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1yZXZpZXdzX19zbGlkZS0tY3VycmVudCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xpY2tTbGlkZXJDb250cm9scyhldnQpIHtcbiAgICBsZXQgZWxlbWVudCA9IGV2dC50YXJnZXQ7XG5cbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlci1jb250cm9sc19fYnV0dG9uJykpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBsZXQgaW5kZXhDdXJyZW50QnV0dG9uID0gc2xpZGVyQnV0dG9ucy5pbmRleE9mKHNsaWRlckJ1dHRvbnMuZmluZChmaW5kQ3VycmVudEJ1dHRvbikpO1xuICAgICAgbGV0IGluZGV4TmV4dEJ1dHRvbiA9IHNsaWRlckJ1dHRvbnMuaW5kZXhPZihlbGVtZW50KTtcblxuICAgICAgc2xpZGVyQnV0dG9uc1tpbmRleEN1cnJlbnRCdXR0b25dLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlci1jb250cm9sc19fYnV0dG9uLS1jdXJyZW50Jyk7XG4gICAgICBzbGlkZXJCdXR0b25zW2luZGV4TmV4dEJ1dHRvbl0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyLWNvbnRyb2xzX19idXR0b24tLWN1cnJlbnQnKTtcblxuICAgICAgbGV0IGluZGV4Q3VycmVudFNsaWRlID0gc2xpZGVzLmluZGV4T2Yoc2xpZGVzLmZpbmQoZmluZEN1cnJlbnRTbGlkZSkpO1xuICAgICAgbGV0IGluZGV4TmV4dFNsaWRlID0gaW5kZXhOZXh0QnV0dG9uO1xuXG4gICAgICBjaGFuZ2VTbGlkZXMoaW5kZXhDdXJyZW50U2xpZGUsIGluZGV4TmV4dFNsaWRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbGlja1NsaWRlck5hdihldnQpIHtcbiAgICBsZXQgZWxlbWVudCA9IGV2dC50YXJnZXQ7XG5cbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlci1uYXZfX3NsaWRlci1idXR0b24nKSkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGxldCBpbmRleEJ1dHRvbiA9IHNsaWRlck5hdkJ1dHRvbnMuaW5kZXhPZihlbGVtZW50KTtcbiAgICAgIGxldCBpbmRleEN1cnJlbnRTbGlkZSA9IHNsaWRlcy5pbmRleE9mKHNsaWRlcy5maW5kKGZpbmRDdXJyZW50U2xpZGUpKTtcbiAgICAgIGxldCBpbmRleE5leHRTbGlkZSA9IGluZGV4Q3VycmVudFNsaWRlO1xuXG4gICAgICBzd2l0Y2ggKGluZGV4QnV0dG9uKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBpbmRleE5leHRTbGlkZSAtPSAxO1xuICAgICAgICAgIGlmIChpbmRleE5leHRTbGlkZSA8IDApIHtcbiAgICAgICAgICAgIGluZGV4TmV4dFNsaWRlID0gc2xpZGVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpbmRleE5leHRTbGlkZSArPSAxO1xuICAgICAgICAgIGlmIChpbmRleE5leHRTbGlkZSA+PSBzbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpbmRleE5leHRTbGlkZSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNoYW5nZVNsaWRlcyhpbmRleEN1cnJlbnRTbGlkZSwgaW5kZXhOZXh0U2xpZGUpO1xuICAgIH1cbiAgfVxufSkoKTtcbiJdfQ==