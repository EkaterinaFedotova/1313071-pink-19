"use strict";function init(e){var t=new e.Map("map",{center:[59.93863106417265,30.3230545],zoom:16,controls:[]}),r=new e.Placemark([59.93867682348719,30.323043771163896],{},{iconLayout:"default#image",iconImageHref:"img/icon-map-marker.svg",iconImageSize:[35,35],iconImageOffset:[-17.5,-17.5]}),s=new e.control.ZoomControl({options:{position:{left:10,bottom:50}}});t.behaviors.disable("scrollZoom"),t.geoObjects.add(r),t.controls.add(s)}svg4everybody(),function(){var r,s,e=document.querySelector(".page-header"),t=document.getElementById("toggle-button"),n=window.pageYOffset;e&&(e.classList.add("page-header--js"),s=e.querySelector(".main-menu"),r=e.querySelector(".page-header__nav-wrapper"),s&&s.classList.add("main-menu--closed"),r&&(r.setAttribute("data-status","closed"),r.classList.add("page-header__nav-wrapper--js"),r.classList.add("page-header__nav-wrapper--transparent"),window.addEventListener("scroll",function(){n=window.pageYOffset,"closed"===r.dataset.status&&(70<n?r.classList.remove("page-header__nav-wrapper--transparent"):r.classList.add("page-header__nav-wrapper--transparent"))}))),t&&(t.classList.add("main-nav__toggle--js"),t.classList.add("main-nav__toggle--off"),t.addEventListener("click",function(e){var t=e.target;e.preventDefault(),t.classList.toggle("main-nav__toggle--off"),s&&s.classList.toggle("main-menu--closed");r&&("closed"===r.dataset.status?r.dataset.status="opened":r.dataset.status="closed",r.classList.contains("page-header__nav-wrapper--transparent")?r.classList.remove("page-header__nav-wrapper--transparent"):n<70&&r.classList.add("page-header__nav-wrapper--transparent"))}))}(),function(){var i,l,e=document.getElementById("photo-filters");if(e){var t=e.querySelector(".form-photo__filters-buttons");i=Array.from(t.querySelectorAll(".form-photo__filter-button")),l=Array.from(e.querySelectorAll(".form-photo__filter")),i&&l&&t.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("form-photo__filter-button")){e.preventDefault();var r=i.indexOf(i.find(c)),s=i.indexOf(t);i[r].classList.remove("form-photo__filter-button--current"),i[s].classList.add("form-photo__filter-button--current");var n=l.indexOf(l.find(d)),a=s;o=a,l[n].classList.remove("form-photo__filter--current"),l[o].classList.add("form-photo__filter--current")}var o})}function c(e){return e.classList.contains("form-photo__filter-button--current")}function d(e){return e.classList.contains("form-photo__filter--current")}}(),function(){var n,a,e=document.getElementById("price");if(e){var t=e.querySelector(".slider-controls");a=e.querySelector(".price__table"),(n=Array.from(t.querySelectorAll(".slider-controls__button")))&&t.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("slider-controls__button")){var r=n.indexOf(n.find(o)),s=n.indexOf(t);n[r].classList.remove("slider-controls__button--current"),n[s].classList.add("slider-controls__button--current"),a.style.left="${(150 - indexNextButton * 100)}%"}})}function o(e){return e.classList.contains("slider-controls__button--current")}}(),function(){var o,a,i,e=document.getElementById("slider-reviews");if(e){var t=e.querySelector(".slider-controls"),r=e.querySelector(".slider-nav");o=Array.from(t.querySelectorAll(".slider-controls__button")),a=Array.from(r.querySelectorAll(".slider-nav__slider-button")),(i=Array.from(e.querySelectorAll(".slider-reviews__slide")))&&o&&(t.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("slider-controls__button")){e.preventDefault();var r=o.indexOf(o.find(l)),s=o.indexOf(t);o[r].classList.remove("slider-controls__button--current"),o[s].classList.add("slider-controls__button--current");var n=i.indexOf(i.find(c)),a=s;d(n,a)}}),r.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("slider-nav__slider-button")){e.preventDefault();var r=a.indexOf(t),s=i.indexOf(i.find(c)),n=s;switch(r){case 0:(n-=1)<0&&(n=i.length-1);break;case 1:(n+=1)>=i.length&&(n=0)}d(s,n)}}))}function l(e){return e.classList.contains("slider-controls__button--current")}function c(e){return e.classList.contains("slider-reviews__slide--current")}function d(e,t){i[e].classList.remove("slider-reviews__slide--current"),i[t].classList.add("slider-reviews__slide--current")}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiaW50ZXJhY3RpdmUtbWFwLmpzIiwibWFpbi1tZW51LmpzIiwicGhvdG8tZmlsdGVycy5qcyIsInByaWNlLXRhYmxlLmpzIiwicmV2aWV3cy1zbGlkZXIuanMiXSwibmFtZXMiOlsiaW5pdCIsInltYXBzIiwibWFwIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImNvbnRyb2xzIiwicGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiaWNvbkxheW91dCIsImljb25JbWFnZUhyZWYiLCJpY29uSW1hZ2VTaXplIiwiaWNvbkltYWdlT2Zmc2V0Iiwiem9vbUNvbnRyb2wiLCJjb250cm9sIiwiWm9vbUNvbnRyb2wiLCJvcHRpb25zIiwicG9zaXRpb24iLCJsZWZ0IiwiYm90dG9tIiwiYmVoYXZpb3JzIiwiZGlzYWJsZSIsImdlb09iamVjdHMiLCJhZGQiLCJzdmc0ZXZlcnlib2R5IiwibmF2V3JhcHBlciIsIm1haW5NZW51IiwicGFnZUhlYWRlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRvZ2dsZUJ1dHRvbiIsImdldEVsZW1lbnRCeUlkIiwiY29vcmRZIiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJjbGFzc0xpc3QiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZGF0YXNldCIsInN0YXR1cyIsInJlbW92ZSIsImV2dCIsImVsZW1lbnQiLCJ0YXJnZXQiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwiZmlsdGVyQnV0dG9ucyIsImZpbHRlcnMiLCJwaG90b0ZpbHRlcnMiLCJmaWx0ZXJzQnV0dG9ucyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbmRleEN1cnJlbnRCdXR0b24iLCJpbmRleE9mIiwiZmluZCIsImZpbmRDdXJyZW50QnV0dG9uIiwiaW5kZXhOZXh0QnV0dG9uIiwiaW5kZXhDdXJyZW50RmlsdGVyIiwiZmluZEN1cnJlbnRGaWx0ZXIiLCJpbmRleE5leHRGaWx0ZXIiLCJpbmRleE5leHRTbGlkZSIsInNsaWRlckJ1dHRvbnMiLCJwcmljZVRhYmxlIiwicHJpY2VCbG9jayIsInNsaWRlckNvbnRyb2xzIiwic3R5bGUiLCJzbGlkZXJOYXZCdXR0b25zIiwic2xpZGVzIiwicmV2aWV3c1NsaWRlciIsInNsaWRlck5hdiIsImluZGV4Q3VycmVudFNsaWRlIiwiZmluZEN1cnJlbnRTbGlkZSIsImNoYW5nZVNsaWRlcyIsImluZGV4QnV0dG9uIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiQUFBQSxhQ0VBLFNBQVNBLEtBQUtDLEdBRVosSUFBSUMsRUFBTSxJQUFJRCxFQUFNRSxJQUFJLE1BQU8sQ0FDN0JDLE9BQVEsQ0FBQyxrQkFBbUIsWUFDNUJDLEtBQU0sR0FDTkMsU0FBVSxLQUdSQyxFQUFZLElBQUlOLEVBQU1PLFVBQ3hCLENBQUMsa0JBQW1CLG9CQUNwQixHQUNBLENBQ0VDLFdBQVksZ0JBQ1pDLGNBQWUsMEJBQ2ZDLGNBQWUsQ0FBQyxHQUFJLElBQ3BCQyxnQkFBaUIsRUFBRSxNQUFPLFFBSTFCQyxFQUFjLElBQUlaLEVBQU1hLFFBQVFDLFlBQVksQ0FDOUNDLFFBQVMsQ0FDUEMsU0FBVSxDQUNSQyxLQUFNLEdBQ05DLE9BQVEsT0FLZGpCLEVBQUlrQixVQUFVQyxRQUFRLGNBQ3RCbkIsRUFBSW9CLFdBQVdDLElBQUloQixHQUNuQkwsRUFBSUksU0FBU2lCLElBQUlWLEdEOUJuQlcsZ0JFQUEsV0FDRSxJQUdJQyxFQUFZQyxFQUhWQyxFQUFhQyxTQUFTQyxjQUFjLGdCQUNwQ0MsRUFBZUYsU0FBU0csZUFBZSxpQkFHekNDLEVBQVNDLE9BQU9DLFlBSWhCUCxJQUNGQSxFQUFXUSxVQUFVWixJQUFJLG1CQUV6QkcsRUFBV0MsRUFBV0UsY0FBYyxjQUNwQ0osRUFBYUUsRUFBV0UsY0FBYyw2QkFFbENILEdBQ0ZBLEVBQVNTLFVBQVVaLElBQUkscUJBR3JCRSxJQUNGQSxFQUFXVyxhQUFhLGNBQWUsVUFDdkNYLEVBQVdVLFVBQVVaLElBQUksZ0NBQ3pCRSxFQUFXVSxVQUFV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Q0FHcEMsU0FBUzRCLEVBQWFGLEVBQW1CVixHQUN2Q08sRUFBT0csR0FBbUJyQyxVQUFVSyxPQUFPLGtDQUMzQzZCLEVBQU9QLEdBQWdCM0IsVUFBVVosSUFBSSxtQ0E1QnpDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcblxuc3ZnNGV2ZXJ5Ym9keSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4iLCIvLyAvLyDQr9C90LTQtdC60YEg0LrQsNGA0YLQsFxuLyplc2xpbnQtZGlzYWJsZSovXG5mdW5jdGlvbiBpbml0KHltYXBzKSB7XG4vKmVzbGludC1lbmFibGUqL1xuICBsZXQgbWFwID0gbmV3IHltYXBzLk1hcCgnbWFwJywge1xuICAgIGNlbnRlcjogWzU5LjkzODYzMTA2NDE3MjY1LCAzMC4zMjMwNTQ1XSxcbiAgICB6b29tOiAxNixcbiAgICBjb250cm9sczogW11cbiAgfSk7XG5cbiAgbGV0IHBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoXG4gICAgWzU5LjkzODY3NjgyMzQ4NzE5LCAzMC4zMjMwNDM3NzExNjM4OTZdLFxuICAgIHt9LFxuICAgIHtcbiAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcbiAgICAgIGljb25JbWFnZUhyZWY6ICdpbWcvaWNvbi1tYXAtbWFya2VyLnN2ZycsXG4gICAgICBpY29uSW1hZ2VTaXplOiBbMzUsIDM1XSxcbiAgICAgIGljb25JbWFnZU9mZnNldDogWy0xNy41LCAtMTcuNV1cbiAgICB9XG4gICk7XG5cbiAgbGV0IHpvb21Db250cm9sID0gbmV3IHltYXBzLmNvbnRyb2wuWm9vbUNvbnRyb2woe1xuICAgIG9wdGlvbnM6IHtcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIGxlZnQ6IDEwLFxuICAgICAgICBib3R0b206IDUwXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBtYXAuYmVoYXZpb3JzLmRpc2FibGUoJ3Njcm9sbFpvb20nKTtcbiAgbWFwLmdlb09iamVjdHMuYWRkKHBsYWNlbWFyayk7XG4gIG1hcC5jb250cm9scy5hZGQoem9vbUNvbnRyb2wpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8g0JzQtdC90Y5cbihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHBhZ2VIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZS1oZWFkZXInKTtcbiAgY29uc3QgdG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZ2dsZS1idXR0b24nKTtcblxuICBsZXQgbmF2V3JhcHBlciwgbWFpbk1lbnU7XG4gIGxldCBjb29yZFkgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG5cbiAgY29uc3QgU0NST0xMX1lfVkFMVUUgPSA3MDtcblxuICBpZiAocGFnZUhlYWRlcikge1xuICAgIHBhZ2VIZWFkZXIuY2xhc3NMaXN0LmFkZCgncGFnZS1oZWFkZXItLWpzJyk7XG5cbiAgICBtYWluTWVudSA9IHBhZ2VIZWFkZXIucXVlcnlTZWxlY3RvcignLm1haW4tbWVudScpO1xuICAgIG5hdldyYXBwZXIgPSBwYWdlSGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5wYWdlLWhlYWRlcl9fbmF2LXdyYXBwZXInKTtcblxuICAgIGlmIChtYWluTWVudSkge1xuICAgICAgbWFpbk1lbnUuY2xhc3NMaXN0LmFkZCgnbWFpbi1tZW51LS1jbG9zZWQnKTtcbiAgICB9XG5cbiAgICBpZiAobmF2V3JhcHBlcikge1xuICAgICAgbmF2V3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdHVzJywgJ2Nsb3NlZCcpO1xuICAgICAgbmF2V3JhcHBlci5jbGFzc0xpc3QuYWRkKCdwYWdlLWhlYWRlcl9fbmF2LXdyYXBwZXItLWpzJyk7XG4gICAgICBuYXZXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ3BhZ2UtaGVhZGVyX19uYXYtd3JhcHBlci0tdHJhbnNwYXJlbnQnKTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbFdpbmRvdyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRvZ2dsZUJ1dHRvbikge1xuICAgIHRvZ2dsZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdtYWluLW5hdl9fdG9nZ2xlLS1qcycpO1xuICAgIHRvZ2dsZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdtYWluLW5hdl9fdG9nZ2xlLS1vZmYnKTtcbiAgICB0b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja1RvZ2dsZUJ1dHRvbik7XG4gIH1cblxuICBmdW5jdGlvbiBjbGlja1RvZ2dsZUJ1dHRvbihldnQpIHtcbiAgICBsZXQgZWxlbWVudCA9IGV2dC50YXJnZXQ7XG5cbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ21haW4tbmF2X190b2dnbGUtLW9mZicpO1xuXG4gICAgaWYgKG1haW5NZW51KSB7XG4gICAgICBtYWluTWVudS5jbGFzc0xpc3QudG9nZ2xlKCdtYWluLW1lbnUtLWNsb3NlZCcpO1xuICAgIH1cblxuICAgIGlmIChuYXZXcmFwcGVyKSB7XG4gICAgICBpZiAobmF2V3JhcHBlci5kYXRhc2V0LnN0YXR1cyA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgbmF2V3JhcHBlci5kYXRhc2V0LnN0YXR1cyA9ICdvcGVuZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmF2V3JhcHBlci5kYXRhc2V0LnN0YXR1cyA9ICdjbG9zZWQnO1xuICAgICAgfVxuXG4gICAgICBpZiAobmF2V3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoJ3BhZ2UtaGVhZGVyX19uYXYtd3JhcHBlci0tdHJhbnNwYXJlbnQnKSkge1xuICAgICAgICBuYXZXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2UtaGVhZGVyX19uYXYtd3JhcHBlci0tdHJhbnNwYXJlbnQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb29yZFkgPCBTQ1JPTExfWV9WQUxVRSkge1xuICAgICAgICAgIG5hdldyYXBwZXIuY2xhc3NMaXN0LmFkZCgncGFnZS1oZWFkZXJfX25hdi13cmFwcGVyLS10cmFuc3BhcmVudCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsV2luZG93KCkge1xuICAgIGNvb3JkWSA9IHdpbmRvdy5wYWdlWU9mZnNldDtcblxuICAgIGlmIChuYXZXcmFwcGVyLmRhdGFzZXQuc3RhdHVzID09PSAnY2xvc2VkJykge1xuICAgICAgaWYgKGNvb3JkWSA+IFNDUk9MTF9ZX1ZBTFVFKSB7XG4gICAgICAgIG5hdldyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgncGFnZS1oZWFkZXJfX25hdi13cmFwcGVyLS10cmFuc3BhcmVudCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmF2V3JhcHBlci5jbGFzc0xpc3QuYWRkKCdwYWdlLWhlYWRlcl9fbmF2LXdyYXBwZXItLXRyYW5zcGFyZW50Jyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8g0JHQu9C+0Log0YTQuNC70YzRgtGA0L7QsiDQtNC70Y8g0YTQvtGC0L5cbihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHBob3RvRmlsdGVycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG90by1maWx0ZXJzJyk7XG4gIGxldCBmaWx0ZXJCdXR0b25zLCBmaWx0ZXJzO1xuXG4gIGlmIChwaG90b0ZpbHRlcnMpIHtcbiAgICBjb25zdCBmaWx0ZXJzQnV0dG9ucyA9IHBob3RvRmlsdGVycy5xdWVyeVNlbGVjdG9yKCcuZm9ybS1waG90b19fZmlsdGVycy1idXR0b25zJyk7XG5cbiAgICBmaWx0ZXJCdXR0b25zID0gQXJyYXkuZnJvbShmaWx0ZXJzQnV0dG9ucy5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1waG90b19fZmlsdGVyLWJ1dHRvbicpKTtcbiAgICBmaWx0ZXJzID0gQXJyYXkuZnJvbShwaG90b0ZpbHRlcnMucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tcGhvdG9fX2ZpbHRlcicpKTtcblxuICAgIGlmIChmaWx0ZXJCdXR0b25zICYmIGZpbHRlcnMpIHtcbiAgICAgIGZpbHRlcnNCdXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tGaWx0ZXJzQnV0dG9ucyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmluZEN1cnJlbnRCdXR0b24oZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZm9ybS1waG90b19fZmlsdGVyLWJ1dHRvbi0tY3VycmVudCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZEN1cnJlbnRGaWx0ZXIoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZm9ybS1waG90b19fZmlsdGVyLS1jdXJyZW50Jyk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGFuZ2VGaWx0ZXJzKGluZGV4Q3VycmVudFNsaWRlLCBpbmRleE5leHRTbGlkZSkge1xuICAgIGZpbHRlcnNbaW5kZXhDdXJyZW50U2xpZGVdLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm0tcGhvdG9fX2ZpbHRlci0tY3VycmVudCcpO1xuICAgIGZpbHRlcnNbaW5kZXhOZXh0U2xpZGVdLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tcGhvdG9fX2ZpbHRlci0tY3VycmVudCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xpY2tGaWx0ZXJzQnV0dG9ucyhldnQpIHtcbiAgICBsZXQgZWxlbWVudCA9IGV2dC50YXJnZXQ7XG5cbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zvcm0tcGhvdG9fX2ZpbHRlci1idXR0b24nKSkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGxldCBpbmRleEN1cnJlbnRCdXR0b24gPSBmaWx0ZXJCdXR0b25zLmluZGV4T2YoZmlsdGVyQnV0dG9ucy5maW5kKGZpbmRDdXJyZW50QnV0dG9uKSk7XG4gICAgICBsZXQgaW5kZXhOZXh0QnV0dG9uID0gZmlsdGVyQnV0dG9ucy5pbmRleE9mKGVsZW1lbnQpO1xuXG4gICAgICBmaWx0ZXJCdXR0b25zW2luZGV4Q3VycmVudEJ1dHRvbl0uY2xhc3NMaXN0LnJlbW92ZSgnZm9ybS1waG90b19fZmlsdGVyLWJ1dHRvbi0tY3VycmVudCcpO1xuICAgICAgZmlsdGVyQnV0dG9uc1tpbmRleE5leHRCdXR0b25dLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tcGhvdG9fX2ZpbHRlci1idXR0b24tLWN1cnJlbnQnKTtcblxuICAgICAgbGV0IGluZGV4Q3VycmVudEZpbHRlciA9IGZpbHRlcnMuaW5kZXhPZihmaWx0ZXJzLmZpbmQoZmluZEN1cnJlbnRGaWx0ZXIpKTtcbiAgICAgIGxldCBpbmRleE5leHRGaWx0ZXIgPSBpbmRleE5leHRCdXR0b247XG5cbiAgICAgIGNoYW5nZUZpbHRlcnMoaW5kZXhDdXJyZW50RmlsdGVyLCBpbmRleE5leHRGaWx0ZXIpO1xuICAgIH1cbiAgfVxufSkoKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vINCi0LDQsdC70LjRhtCwINGC0LDRgNC40YTQvtCyXG4oZnVuY3Rpb24gKCkge1xuICBjb25zdCBwcmljZUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaWNlJyk7XG4gIGxldCBzbGlkZXJCdXR0b25zLCBwcmljZVRhYmxlO1xuXG4gIGlmIChwcmljZUJsb2NrKSB7XG4gICAgY29uc3Qgc2xpZGVyQ29udHJvbHMgPSBwcmljZUJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItY29udHJvbHMnKTtcbiAgICBwcmljZVRhYmxlID0gcHJpY2VCbG9jay5xdWVyeVNlbGVjdG9yKCcucHJpY2VfX3RhYmxlJyk7XG5cbiAgICBzbGlkZXJCdXR0b25zID0gQXJyYXkuZnJvbShzbGlkZXJDb250cm9scy5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWNvbnRyb2xzX19idXR0b24nKSk7XG5cbiAgICBpZiAoc2xpZGVyQnV0dG9ucykge1xuICAgICAgc2xpZGVyQ29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja1NsaWRlckNvbnRyb2xzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kQ3VycmVudEJ1dHRvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXItY29udHJvbHNfX2J1dHRvbi0tY3VycmVudCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xpY2tTbGlkZXJDb250cm9scyhldnQpIHtcbiAgICBsZXQgZWxlbWVudCA9IGV2dC50YXJnZXQ7XG5cbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlci1jb250cm9sc19fYnV0dG9uJykpIHtcbiAgICAgIGxldCBpbmRleEN1cnJlbnRCdXR0b24gPSBzbGlkZXJCdXR0b25zLmluZGV4T2Yoc2xpZGVyQnV0dG9ucy5maW5kKGZpbmRDdXJyZW50QnV0dG9uKSk7XG4gICAgICBsZXQgaW5kZXhOZXh0QnV0dG9uID0gc2xpZGVyQnV0dG9ucy5pbmRleE9mKGVsZW1lbnQpO1xuXG4gICAgICBzbGlkZXJCdXR0b25zW2luZGV4Q3VycmVudEJ1dHRvbl0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyLWNvbnRyb2xzX19idXR0b24tLWN1cnJlbnQnKTtcbiAgICAgIHNsaWRlckJ1dHRvbnNbaW5kZXhOZXh0QnV0dG9uXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXItY29udHJvbHNfX2J1dHRvbi0tY3VycmVudCcpO1xuICAgICAgcHJpY2VUYWJsZS5zdHlsZS5sZWZ0ID0gJyR7KDE1MCAtIGluZGV4TmV4dEJ1dHRvbiAqIDEwMCl9JSc7XG4gICAgfVxuICB9XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8g0JHQu9C+0Log0L7RgtC30YvQstC+0LJcbihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHJldmlld3NTbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyLXJldmlld3MnKTtcbiAgbGV0IHNsaWRlckJ1dHRvbnMsIHNsaWRlck5hdkJ1dHRvbnMsIHNsaWRlcztcblxuICBpZiAocmV2aWV3c1NsaWRlcikge1xuICAgIGNvbnN0IHNsaWRlckNvbnRyb2xzID0gcmV2aWV3c1NsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWNvbnRyb2xzJyk7XG4gICAgY29uc3Qgc2xpZGVyTmF2ID0gcmV2aWV3c1NsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLW5hdicpO1xuXG4gICAgc2xpZGVyQnV0dG9ucyA9IEFycmF5LmZyb20oc2xpZGVyQ29udHJvbHMucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlci1jb250cm9sc19fYnV0dG9uJykpO1xuICAgIHNsaWRlck5hdkJ1dHRvbnMgPSBBcnJheS5mcm9tKHNsaWRlck5hdi5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLW5hdl9fc2xpZGVyLWJ1dHRvbicpKTtcbiAgICBzbGlkZXMgPSBBcnJheS5mcm9tKHJldmlld3NTbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlci1yZXZpZXdzX19zbGlkZScpKTtcblxuICAgIGlmIChzbGlkZXMgJiYgc2xpZGVyQnV0dG9ucykge1xuICAgICAgc2xpZGVyQ29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja1NsaWRlckNvbnRyb2xzKTtcbiAgICAgIHNsaWRlck5hdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrU2xpZGVyTmF2KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kQ3VycmVudEJ1dHRvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXItY29udHJvbHNfX2J1dHRvbi0tY3VycmVudCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZEN1cnJlbnRTbGlkZShlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXItcmV2aWV3c19fc2xpZGUtLWN1cnJlbnQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoYW5nZVNsaWRlcyhpbmRleEN1cnJlbnRTbGlkZSwgaW5kZXhOZXh0U2xpZGUpIHtcbiAgICBzbGlkZXNbaW5kZXhDdXJyZW50U2xpZGVdLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlci1yZXZpZXdzX19zbGlkZS0tY3VycmVudCcpO1xuICAgIHNsaWRlc1tpbmRleE5leHRTbGlkZV0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyLXJldmlld3NfX3NsaWRlLS1jdXJyZW50Jyk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGlja1NsaWRlckNvbnRyb2xzKGV2dCkge1xuICAgIGxldCBlbGVtZW50ID0gZXZ0LnRhcmdldDtcblxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWNvbnRyb2xzX19idXR0b24nKSkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGxldCBpbmRleEN1cnJlbnRCdXR0b24gPSBzbGlkZXJCdXR0b25zLmluZGV4T2Yoc2xpZGVyQnV0dG9ucy5maW5kKGZpbmRDdXJyZW50QnV0dG9uKSk7XG4gICAgICBsZXQgaW5kZXhOZXh0QnV0dG9uID0gc2xpZGVyQnV0dG9ucy5pbmRleE9mKGVsZW1lbnQpO1xuXG4gICAgICBzbGlkZXJCdXR0b25zW2luZGV4Q3VycmVudEJ1dHRvbl0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyLWNvbnRyb2xzX19idXR0b24tLWN1cnJlbnQnKTtcbiAgICAgIHNsaWRlckJ1dHRvbnNbaW5kZXhOZXh0QnV0dG9uXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXItY29udHJvbHNfX2J1dHRvbi0tY3VycmVudCcpO1xuXG4gICAgICBsZXQgaW5kZXhDdXJyZW50U2xpZGUgPSBzbGlkZXMuaW5kZXhPZihzbGlkZXMuZmluZChmaW5kQ3VycmVudFNsaWRlKSk7XG4gICAgICBsZXQgaW5kZXhOZXh0U2xpZGUgPSBpbmRleE5leHRCdXR0b247XG5cbiAgICAgIGNoYW5nZVNsaWRlcyhpbmRleEN1cnJlbnRTbGlkZSwgaW5kZXhOZXh0U2xpZGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrU2xpZGVyTmF2KGV2dCkge1xuICAgIGxldCBlbGVtZW50ID0gZXZ0LnRhcmdldDtcblxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLW5hdl9fc2xpZGVyLWJ1dHRvbicpKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgbGV0IGluZGV4QnV0dG9uID0gc2xpZGVyTmF2QnV0dG9ucy5pbmRleE9mKGVsZW1lbnQpO1xuICAgICAgbGV0IGluZGV4Q3VycmVudFNsaWRlID0gc2xpZGVzLmluZGV4T2Yoc2xpZGVzLmZpbmQoZmluZEN1cnJlbnRTbGlkZSkpO1xuICAgICAgbGV0IGluZGV4TmV4dFNsaWRlID0gaW5kZXhDdXJyZW50U2xpZGU7XG5cbiAgICAgIHN3aXRjaCAoaW5kZXhCdXR0b24pIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGluZGV4TmV4dFNsaWRlIC09IDE7XG4gICAgICAgICAgaWYgKGluZGV4TmV4dFNsaWRlIDwgMCkge1xuICAgICAgICAgICAgaW5kZXhOZXh0U2xpZGUgPSBzbGlkZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGluZGV4TmV4dFNsaWRlICs9IDE7XG4gICAgICAgICAgaWYgKGluZGV4TmV4dFNsaWRlID49IHNsaWRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGluZGV4TmV4dFNsaWRlID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2hhbmdlU2xpZGVzKGluZGV4Q3VycmVudFNsaWRlLCBpbmRleE5leHRTbGlkZSk7XG4gICAgfVxuICB9XG59KSgpO1xuIl19